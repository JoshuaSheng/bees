<!DOCTYPE html>
<html>
<body>

<div id="demo">
<button type="button" onclick="buttonpress()">Change Content</button>
</div>

<p id="test"></p>

<script>
var options = {
  enableHighAccuracy: true,
  timeout: 5000,
  maximumAge: 0
};
var lon = 1
var lat = 1
function success(pos) {
  var crd = pos.coords;

  console.log('Your current position is:');
  lon = crd.longitude;	
  lat = crd.latitude;
  console.log(`Latitude : ${crd.latitude}`);
  console.log(`Longitude: ${crd.longitude}`);
  console.log(`More or less ${crd.accuracy} meters.`);
  loadXMLDoc(lon,lat);
  return 1
}

function error(err) {
  window.alert("press the accept button to use this");
}
function buttonpress()
{
	navigator.geolocation.getCurrentPosition(success, error, options);
	
}
function loadXMLDoc(a1, a2) {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("demo").innerHTML =
      this.responseText;
    }
  };

  var output = "https://cors-anywhere.herokuapp.com/https://beeees.herokuapp.com/getmsg/?long=";
  output = output.concat(lon.toString());
  output = output.concat("&lat=");
  output = output.concat(lat.toString())
  console.log(output)
  xhttp.open("GET", output, true);
  xhttp.send();
}

</script>

</body>
</html>
